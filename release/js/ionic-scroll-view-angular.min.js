/*!
 * Copyright 2014 Drifty Co.
 * http://drifty.com/
 *
 * Ionic, v1.0.0-beta.6
 * A powerful HTML5 mobile app framework.
 * http://ionicframework.com/
 *
 * By @maxlynch, @benjsperry, @adamdbradley <3
 *
 * Licensed under the MIT license. Please see LICENSE for more information.
 *
 */

!function(){function e(e){return["$log",function(t){function i(e){this.handle=e}var r=this,n=this._instances=[];this._registerInstance=function(e,t){return e.$$delegateHandle=t,n.push(e),function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}},this.$getByHandle=function(e){return e?new i(e):r},e.forEach(function(e){i.prototype[e]=function(){var i,r,o=this.handle,a=arguments,s=0;return n.forEach(function(t){t.$$delegateHandle===o&&(s++,r=t[e].apply(t,a),1===s&&(i=r))}),s?i:t.warn('Delegate for handle "'+this.handle+'" could not find a corresponding element with delegate-handle="'+this.handle+'"! '+e+"() was not called!\nPossible cause: If you are calling "+e+'() immediately, and your element with delegate-handle="'+this.handle+'" is a child of your controller, then your element may not be compiled yet. Put a $timeout around your call to '+e+"() and try again.")},r[e]=function(){var t,i,r=arguments;return n.forEach(function(n,o){i=n[e].apply(n,r),0===o&&(t=i)}),t}})}]}var t=angular.module("ionic",["ngAnimate","ngSanitize","ui.router"]),i=(angular.extend,angular.forEach),r=(angular.isDefined,angular.isString,angular.element);t.factory("$$scrollValueCache",function(){return{}}).controller("$ionicScroll",["$scope","scrollViewOptions","$timeout","$window","$$scrollValueCache","$location","$rootScope","$document","$ionicScrollDelegate",function(e,t,i,n,o,a,s,l,c){var u=this;this._scrollViewOptions=t;var d=this.element=t.el,f=this.$element=r(d),v=this.scrollView=new ionic.views.Scroll(t);(f.parent().length?f.parent():f).data("$$ionicScrollController",this);var h=c._registerInstance(this,t.delegateHandle);angular.isDefined(t.bouncing)||ionic.Platform.ready(function(){v.options.bouncing=!0,ionic.Platform.isAndroid()&&(v.options.bouncing=!1,v.options.deceleration=.95)});var w=angular.bind(v,v.resize);ionic.on("resize",w,n);var $=angular.noop;e.$on("$destroy",function(){h(),v.__removeEventHandlers(),ionic.off("resize",w,n),n.removeEventListener("resize",w),$(),u._rememberScrollId&&(o[u._rememberScrollId]=v.getValues())}),f.on("scroll",function(t){var i=(t.originalEvent||t).detail||{};e.$onScroll&&e.$onScroll({event:t,scrollTop:i.scrollTop||0,scrollLeft:i.scrollLeft||0})}),e.$on("$viewContentLoaded",function(e,t){if(!e.defaultPrevented){e.preventDefault();var r=t&&t.viewId;r&&i(function(){u.rememberScrollPosition(r),u.scrollToRememberedPosition(),$=s.$on("$viewHistory.viewBack",function(e,t){r===t&&u.forgetScrollPosition()})},1,!1)}}),i(function(){v.run()}),this._rememberScrollId=null,this.getScrollView=function(){return this.scrollView},this.getScrollPosition=function(){return this.scrollView.getValues()},this.resize=function(){return i(w)},this.scrollTop=function(e){this.resize().then(function(){v.scrollTo(0,0,!!e)})},this.scrollBottom=function(e){this.resize().then(function(){var t=v.getScrollMax();v.scrollTo(t.left,t.top,!!e)})},this.scrollTo=function(e,t,i){this.resize().then(function(){v.scrollTo(e,t,!!i)})},this.scrollBy=function(e,t,i){this.resize().then(function(){v.scrollBy(e,t,!!i)})},this.anchorScroll=function(e){this.resize().then(function(){var t=a.hash(),i=t&&l[0].getElementById(t);if(t&&i){var r=ionic.DomUtil.getPositionInParent(i,u.$element);v.scrollTo(r.left,r.top,!!e)}else v.scrollTo(0,0,!!e)})},this.rememberScrollPosition=function(e){if(!e)throw new Error("Must supply an id to remember the scroll by!");this._rememberScrollId=e},this.forgetScrollPosition=function(){delete o[this._rememberScrollId],this._rememberScrollId=null},this.scrollToRememberedPosition=function(e){var t=o[this._rememberScrollId];t&&this.resize().then(function(){v.scrollTo(+t.left,+t.top,e)})},this._setRefresher=function(e,t){var i=this.refresher=t,r=u.refresher.clientHeight||0;v.activatePullToRefresh(r,function(){i.classList.add("active"),e.$onPulling()},function(){i.classList.remove("refreshing"),i.classList.remove("active")},function(){i.classList.add("refreshing"),e.$onRefresh()})}}]),t.factory("$ionicGesture",[function(){return{on:function(e,t,i){return window.ionic.onGesture(e,t,i[0])},off:function(e,t,i){return window.ionic.offGesture(e,t,i)}}}]);var n=100;t.provider("$ionicPlatform",function(){return{$get:["$q","$rootScope",function(e){var t={onHardwareBackButton:function(e){ionic.Platform.ready(function(){document.addEventListener("backbutton",e,!1)})},offHardwareBackButton:function(e){ionic.Platform.ready(function(){document.removeEventListener("backbutton",e)})},$backButtonActions:{},registerBackButtonAction:function(e,i,r){t._hasBackButtonHandler||(t.$backButtonActions={},t.onHardwareBackButton(t.hardwareBackButtonClick),t._hasBackButtonHandler=!0);var n={id:r?r:ionic.Utils.nextUid(),priority:i?i:0,fn:e};return t.$backButtonActions[n.id]=n,function(){delete t.$backButtonActions[n.id]}},hardwareBackButtonClick:function(e){var i,r;for(r in t.$backButtonActions)(!i||t.$backButtonActions[r].priority>=i.priority)&&(i=t.$backButtonActions[r]);return i?(i.fn(e),i):void 0},is:function(e){return ionic.Platform.is(e)},ready:function(t){var i=e.defer();return ionic.Platform.ready(function(){i.resolve(),t&&t()}),i.promise}};return t}]}}),t.run(["$rootScope","$state","$location","$document","$animate","$ionicPlatform","$ionicViewService",function(e,t,i,r,o,a,s){function l(t){return e.$viewHistory.backView?e.$viewHistory.backView.go():ionic.Platform.exitApp(),t.preventDefault(),!1}e.$viewHistory={histories:{root:{historyId:"root",parentHistoryId:null,stack:[],cursor:-1}},views:{},backView:null,forwardView:null,currentView:null,disabledRegistrableTagNames:[]},s.disableRegisterByTagName&&(s.disableRegisterByTagName("ion-tabs"),s.disableRegisterByTagName("ion-side-menus")),e.$on("viewState.changeHistory",function(r,n){if(n){var o=n.historyId?e.$viewHistory.histories[n.historyId]:null;if(o&&o.cursor>-1&&o.cursor<o.stack.length){var a=o.stack[o.cursor];return a.go(n)}!n.url&&n.uiSref&&(n.url=t.href(n.uiSref)),n.url&&(0===n.url.indexOf("#")&&(n.url=n.url.replace("#","")),n.url!==i.url()&&i.url(n.url))}}),e.$on("viewState.viewEnter",function(e,t){t&&t.title&&(r[0].title=t.title)}),a.registerBackButtonAction(l,n)}]).factory("$ionicViewService",["$rootScope","$state","$location","$window","$injector","$animate",function(e,t,i,r,n,o){function a(){return ionic.Utils.nextUid()}var s=function(){};return s.prototype.initialize=function(e){if(e){for(var t in e)this[t]=e[t];return this}return null},s.prototype.go=function(){return this.stateName?t.go(this.stateName,this.stateParams):this.url&&this.url!==i.url()?e.$viewHistory.backView===this?r.history.go(-1):e.$viewHistory.forwardView===this?r.history.go(1):void i.url(this.url):null},s.prototype.destroy=function(){this.scope&&(this.scope.$destroy&&this.scope.$destroy(),this.scope=null)},{register:function(t,r){var n=e.$viewHistory,o=this.getCurrentStateId(),s=this._getHistory(t),l=n.currentView,c=n.backView,u=n.forwardView,d=this.nextViewOptions(),f={viewId:null,navAction:null,navDirection:null,historyId:s.historyId};if(r&&!this.isTagNameRegistrable(r))return f.navAction="disabledByTagName",f;if(l&&l.stateId===o&&l.historyId===s.historyId)return f.navAction="noChange",f;if(n.forcedNav)ionic.Utils.extend(f,n.forcedNav),e.$viewHistory.forcedNav=null;else if(c&&c.stateId===o)f.viewId=c.viewId,f.navAction="moveBack",f.viewId=c.viewId,c.historyId===l.historyId&&(f.navDirection="back");else if(u&&u.stateId===o){f.viewId=u.viewId,f.navAction="moveForward",u.historyId===l.historyId&&(f.navDirection="forward");var v=this._getParentHistoryObj(t);u.historyId&&v.scope&&(v.scope.$historyId=u.historyId,f.historyId=u.historyId)}else if(l&&l.historyId!==s.historyId&&s.cursor>-1&&s.stack.length>0&&s.cursor<s.stack.length&&s.stack[s.cursor].stateId===o)f.viewId=s.stack[s.cursor].viewId,f.navAction="moveBack";else{if(f.viewId=a(o),l){if(l.forwardViewId=f.viewId,s.historyId===l.historyId&&(f.navDirection="forward"),f.navAction="newView",u&&l.stateId!==u.stateId){var h=this._getHistoryById(u.historyId);if(h)for(var w=h.stack.length-1;w>=u.index;w--)h.stack[w].destroy(),h.stack.splice(w)}}else f.navAction="initialView";n.views[f.viewId]=this.createView({viewId:f.viewId,index:s.stack.length,historyId:s.historyId,backViewId:l&&l.viewId?l.viewId:null,forwardViewId:null,stateId:o,stateName:this.getCurrentStateName(),stateParams:this.getCurrentStateParams(),url:i.url()}),"moveBack"==f.navAction&&e.$emit("$viewHistory.viewBack",l.viewId,f.viewId),s.stack.push(n.views[f.viewId])}return d&&(d.disableAnimate&&(f.navDirection=null),d.disableBack&&(n.views[f.viewId].backViewId=null),this.nextViewOptions(null)),this.setNavViews(f.viewId),s.cursor=n.currentView.index,f},setNavViews:function(t){var i=e.$viewHistory;i.currentView=this._getViewById(t),i.backView=this._getBackView(i.currentView),i.forwardView=this._getForwardView(i.currentView),e.$broadcast("$viewHistory.historyChange",{showBack:i.backView&&i.backView.historyId===i.currentView.historyId})},registerHistory:function(e){e.$historyId=ionic.Utils.nextUid()},createView:function(e){var t=new s;return t.initialize(e)},getCurrentView:function(){return e.$viewHistory.currentView},getBackView:function(){return e.$viewHistory.backView},getForwardView:function(){return e.$viewHistory.forwardView},getNavDirection:function(){return e.$viewHistory.navDirection},getCurrentStateName:function(){return t&&t.current?t.current.name:null},isCurrentStateNavView:function(e){return t&&t.current&&t.current.views&&t.current.views[e]?!0:!1},getCurrentStateParams:function(){var e;if(t&&t.params)for(var i in t.params)t.params.hasOwnProperty(i)&&(e=e||{},e[i]=t.params[i]);return e},getCurrentStateId:function(){var e;if(t&&t.current&&t.current.name){if(e=t.current.name,t.params)for(var i in t.params)t.params.hasOwnProperty(i)&&t.params[i]&&(e+="_"+i+"="+t.params[i]);return e}return ionic.Utils.nextUid()},goToHistoryRoot:function(t){if(t){var i=e.$viewHistory.histories[t];if(i&&i.stack.length){if(e.$viewHistory.currentView&&e.$viewHistory.currentView.viewId===i.stack[0].viewId)return;e.$viewHistory.forcedNav={viewId:i.stack[0].viewId,navAction:"moveBack",navDirection:"back"},i.stack[0].go()}}},_getViewById:function(t){return t?e.$viewHistory.views[t]:null},_getBackView:function(e){return e?this._getViewById(e.backViewId):null},_getForwardView:function(e){return e?this._getViewById(e.forwardViewId):null},_getHistoryById:function(t){return t?e.$viewHistory.histories[t]:null},_getHistory:function(t){var i=this._getParentHistoryObj(t);return e.$viewHistory.histories[i.historyId]||(e.$viewHistory.histories[i.historyId]={historyId:i.historyId,parentHistoryId:this._getParentHistoryObj(i.scope.$parent).historyId,stack:[],cursor:-1}),e.$viewHistory.histories[i.historyId]},_getParentHistoryObj:function(t){for(var i=t;i;){if(i.hasOwnProperty("$historyId"))return{historyId:i.$historyId,scope:i};i=i.$parent}return{historyId:"root",scope:e}},nextViewOptions:function(e){return arguments.length?void(this._nextOpts=e):this._nextOpts},getRenderer:function(e,t,i){function r(e){for(var t="";!t&&e;)t=e.getAttribute("animation"),e=e.parentElement;return t}function n(){c&&e[0].classList.add(c),"back"===a.navDirection?e[0].classList.add("reverse"):e[0].classList.remove("reverse")}var a,s,l=this,c=r(e[0]);return function(t){return{enter:function(i){return s&&t?(n(),i.addClass("ng-enter"),document.body.classList.add("disable-pointer-events"),void o.enter(i,e,null,function(){document.body.classList.remove("disable-pointer-events"),c&&e[0].classList.remove(c)})):void e.append(i)},leave:function(){var i=e.contents();return s&&t?(n(),void o.leave(i,function(){i.remove()})):void i.remove()},register:function(e){return a=l.register(i,e),s=null!==c&&null!==a.navDirection,a}}}},disableRegisterByTagName:function(t){e.$viewHistory.disabledRegistrableTagNames.push(t.toUpperCase())},isTagNameRegistrable:function(t){var i,r,n=e.$viewHistory.disabledRegistrableTagNames;for(i=0;i<t.length;i++)if(1===t[i].nodeType)for(r=0;r<n.length;r++)if(t[i].tagName===n[r])return!1;return!0},clearHistory:function(){var t=e.$viewHistory.histories,i=e.$viewHistory.currentView;for(var r in t)t[r].stack&&(t[r].stack=[],t[r].cursor=-1),i.historyId===r?(i.backViewId=null,i.forwardViewId=null,t[r].stack.push(i)):t[r].destroy&&t[r].destroy();for(var n in e.$viewHistory.views)n!==i.viewId&&delete e.$viewHistory.views[n];this.setNavViews(i.viewId)}}}]),t.service("$ionicScrollDelegate",e(["resize","scrollTop","scrollBottom","scrollTo","scrollBy","getScrollPosition","anchorScroll","getScrollView","rememberScrollPosition","forgetScrollPosition","scrollToRememberedPosition"])),t.factory("$ionicBind",["$parse","$interpolate",function(e,t){var r=/^\s*([@=&])(\??)\s*(\w*)\s*$/;return function(n,o,a){i(a||{},function(i,a){var s,l,c=i.match(r)||[],u=c[3]||a,d=c[1];switch(d){case"@":if(!o[u])return;o.$observe(u,function(e){n[a]=e}),o[u]&&(n[a]=t(o[u])(n));break;case"=":if(!o[u])return;l=n.$watch(o[u],function(e){n[a]=e}),n.$on("$destroy",l);break;case"&":if(o[u]&&o[u].match(RegExp(a+"(.*?)")))throw new Error('& expression binding "'+a+'" looks like it will recursively call "'+o[u]+'" and cause a stack overflow! Please choose a different scopeName.');s=e(o[u]),n[a]=function(e){return s(n,e)}}})}}]),t.directive("ionContent",["$timeout","$controller","$ionicBind",function(e,t,i){return{restrict:"E",require:"^?ionNavView",scope:!0,priority:800,compile:function(e,n){function o(e,r,o){var s=e.$parent;e.$watch(function(){return(s.$hasHeader?" has-header":"")+(s.$hasSubheader?" has-subheader":"")+(s.$hasFooter?" has-footer":"")+(s.$hasSubfooter?" has-subfooter":"")+(s.$hasTabs?" has-tabs":"")+(s.$hasTabsTop?" has-tabs-top":"")},function(e,t){r.removeClass(t),r.addClass(e)}),e.$hasHeader=e.$hasSubheader=e.$hasFooter=e.$hasSubfooter=e.$hasTabs=e.$hasTabsTop=!1,i(e,o,{$onScroll:"&onScroll",$onScrollComplete:"&onScrollComplete",hasBouncing:"@",padding:"@",direction:"@",scrollbarX:"@",scrollbarY:"@",startX:"@",startY:"@",scrollEventInterval:"@"}),e.direction=e.direction||"y",angular.isDefined(o.padding)&&e.$watch(o.padding,function(e){(a||r).toggleClass("padding",!!e)}),"false"===o.scroll||("true"===n.overflowScroll?r.addClass("overflow-scroll"):t("$ionicScroll",{$scope:e,scrollViewOptions:{el:r[0],delegateHandle:n.delegateHandle,bouncing:e.$eval(e.hasBouncing),startX:e.$eval(e.startX)||0,startY:e.$eval(e.startY)||0,scrollbarX:e.$eval(e.scrollbarX)!==!1,scrollbarY:e.$eval(e.scrollbarY)!==!1,scrollingX:e.direction.indexOf("x")>=0,scrollingY:e.direction.indexOf("y")>=0,scrollEventInterval:parseInt(e.scrollEventInterval,10)||10,scrollingComplete:function(){e.$onScrollComplete({scrollTop:this.__scrollTop,scrollLeft:this.__scrollLeft})}}}))}var a;return e.addClass("scroll-content ionic-scroll"),"false"!=n.scroll&&(a=r('<div class="scroll"></div>'),a.append(e.contents()),e.append(a)),{pre:o}}}}]),t.directive("ionScroll",["$timeout","$controller","$ionicBind",function(e,t,i){return{restrict:"E",scope:!0,controller:function(){},compile:function(e){function n(e,r,n){var a,s;i(e,n,{direction:"@",paging:"@",$onScroll:"&onScroll",scroll:"@",scrollbarX:"@",scrollbarY:"@",zooming:"@",minZoom:"@",maxZoom:"@",animationDuration:"@"}),e.direction=e.direction||"y",angular.isDefined(n.padding)&&e.$watch(n.padding,function(e){o.toggleClass("padding",!!e)}),e.$eval(e.paging)===!0&&o.addClass("scroll-paging"),e.direction||(e.direction="y");var l=e.$eval(e.paging)===!0,c={el:r[0],delegateHandle:n.delegateHandle,bouncing:e.$eval(n.hasBouncing),paging:l,scrollbarX:e.$eval(e.scrollbarX)!==!1,scrollbarY:e.$eval(e.scrollbarY)!==!1,scrollingX:e.direction.indexOf("x")>=0,scrollingY:e.direction.indexOf("y")>=0,zooming:e.$eval(e.zooming)===!0,maxZoom:e.$eval(e.maxZoom)||3,minZoom:e.$eval(e.minZoom)||.5,animationDuration:e.$eval(e.animationDuration)||250};l&&(c.speedMultiplier=.8,c.bouncing=!1),s=t("$ionicScroll",{$scope:e,scrollViewOptions:c}),a=e.$parent.scrollView=s.scrollView}e.addClass("scroll-view ionic-scroll");var o=r('<div class="scroll"></div>');return o.append(e.contents()),e.append(o),{pre:n}}}}]),t.directive("ionNavView",["$ionicViewService","$state","$compile","$controller","$animate",function(e,t,i,n,o){var a=!1,s={restrict:"E",terminal:!0,priority:2e3,transclude:!0,controller:function(){},compile:function(l,c,u){return function(l,c,d){function f(a){o.enabled()===!1&&(a=!1);var s=t.$current&&t.$current.locals[w];if(s!==h){var u=e.getRenderer(c,d,l);if(v&&(v.$destroy(),v=null),!s)return h=null,y.state=null,c.append(g);var f=r("<div></div>").html(s.$template).contents(),m=u().register(f);u(a).leave(),h=s,y.state=s.$$state,u(a).enter(f);var p=i(f);if(v=l.$new(),v.$navDirection=m.navDirection,s.$$controller){s.$scope=v;var I=n(s.$$controller,s);c.children().data("$ngControllerController",I)}p(v);var b=e._getViewById(m.viewId)||{};v.$broadcast("$viewContentLoaded",b),$&&v.$eval($),f=null}}var v,h,w=d[s.name]||d.name||"",$=d.onload||"",g=u(l);c.append(g);var m=c.parent().inheritedData("$uiView");w.indexOf("@")<0&&(w=w+"@"+(m?m.state.name:""));var y={name:w,state:null};c.data("$uiView",y);var p=function(){if(!a){a=!0;try{f(!0)}catch(e){throw a=!1,e}a=!1}};l.$on("$stateChangeSuccess",p),f(!1)}}};return s}])}();